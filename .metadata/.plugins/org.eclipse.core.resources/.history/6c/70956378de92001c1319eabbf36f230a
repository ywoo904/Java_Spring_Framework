package com.zerock.dao;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import com.zerock.command.BoardVO;
import com.zerock.command.ScoreVO;

//DAO객체주입은 일반적으로 Component나 Repository Annotation을 사용합니다.  
//Component-scan에 꼭 추가해준다. 
	
//@Component
@Repository("scoreDAO")
public class ScoreDAOImpl implements ScoreDAO {
	
	//DB를 대신할 저장소 
	@Autowired
	private JdbcTemplate jdbcTemplate; 	
	@Autowired
	private DataSource dataSource;
	
	
	//DB를 대신할 저장소필요(DB로 가정)  
	//ArrayList<ScoreVO> DB = new ArrayList<ScoreVO>(); 
	
	@Override //점수입력메서드
	public void scoreInsert(ScoreVO vo) {
		
		String sql="INSERT INTO SCORE01(name,kor,eng,math) values(?,?,?,?)"; 
	
		System.out.println("----DAO계층---------");
		System.out.println(vo.getName());
		System.out.println(vo.getKor()); 
		
		int result = jdbcTemplate.update(sql, new Object[] {vo.getName(),vo.getKor(),vo.getEng(),vo.getMath()});
		System.out.println(result);
		
		//DB.add(vo);
		//System.out.println("현재 게시물 수: " + DB.size());
	
	}
	

	@Override //점수결과 출력메서드
	public ArrayList<ScoreVO> scoreSelect() {

		String sql= "select * from score01";
		List<ScoreVO> list= jdbcTemplate.query(sql, new Object[] {}, new RowMapper<ScoreVO>() { 
		
			@Override
			public ScoreVO mapRow(ResultSet rs, int rowNum) throws SQLException {  
				
				ScoreVO vo = new ScoreVO();
				vo.setName(rs.getString("name"));
				vo.setKor(rs.getString("kor"));
				vo.setEng(rs.getString("eng"));
				vo.setMath(rs.getString("math"));
				return vo;
			}
			
			
			
			
		});
		
		
	
		return list;
	}

	@Override //점수삭제 메서드 
	public void scoreDelete(String num) {
	
		ArrayList<ScoreVO> DB = new ArrayList<ScoreVO>();
		int index = Integer.parseInt(num);
		DB.remove(index); //DB삭제
		
		
		
	}

	
	
	
	
	
	
}
